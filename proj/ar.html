<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
<script src="aframe-ar.min.js"></script>
<script>
    window.onload = () => {
        let scene = document.querySelector('a-scene');
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                let box = document.createElement('a-box');
                box.setAttribute('gps-entity-place', `latitude: ${position.coords.latitude - 0.001}; longitude: ${position.coords.longitude +0.001}`);
                box.setAttribute('scale', '20 20 20');
                box.setAttribute('color', 'red')
                scene.appendChild(box);
            });
        }
    }
    AFRAME.registerComponent("markerdebug", {
        init: function() {
            this.el.addEventListener("markerFound", function(e) {
                console.log('found')
            });

            this.el.addEventListener("markerLost", function(e) {
                console.log('lost')
            });
        }
    });
</script>

<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>
    <a-scene embedded markerdebug arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;'>

        <a-marker preset='hiro'>
            <a-sphere position='0 0.5 0' material='opacity: 0.5; side: double;color:blue;'>
            </a-sphere>
        </a-marker>

        <!-- Location based elements are displayed, hiro marker is found but element is not displayed -->
        <!-- <a-camera  gps-camera rotation-reader/> -->

        <!-- Location based elements are displayed, hiro marker is found but element is not displayed -->
        <!-- <a-camera camera gps-camera rotation-reader/>
        <a-entity camera/> -->

        <!-- No gps based elements displayed, hiro marker is found and it's element is displayed -->
        <a-entity camera rotation-reader/>
    </a-scene>
</body>

</html>